var InTheBoks;(function(n){var t=function(){function t(){this.onLogin=new n.Event,this.onLogout=new n.Event}return Object.defineProperty(t.prototype,"LoggedIn",{get:function(){return this.onLogin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LoggedOut",{get:function(){return this.onLogout},enumerable:!0,configurable:!0}),t.prototype.Login=function(){alert("InTheBoks.Facebook.Login"),FB.login(function(n){console.log(n)},{scope:"email,user_about_me,friends_about_me"})},t.prototype.Logout=function(){alert("InTheBoks.Facebook.Logout"),FB.logout()},t.prototype.CheckStatus=function(){FB.getLoginStatus(function(n){console.log(n),alert("Check Status...")})},t.prototype.Initialize=function(){var n=this;n.AppId="407544339296631",document.URL.indexOf("localhost")>-1&&(n.AppId="122645277750670"),FB.init({appId:n.AppId,status:!0,cookie:!1,xfbml:!1,oauth:!0}),FB.Event.subscribe("auth.statusChange",function(t){var r,i;console.log("FB: auth.statusChange"),t.authResponse?(r=t.authResponse.userID,n.AccessTokenExpiresIn=t.authResponse.expiresIn,i=t.authResponse.accessToken,n.AccessToken=i,$.cookie("AccessToken",i),$.cookie("AccessTokenExpiresIn",n.AccessTokenExpiresIn),FB.api("/me",function(t){t.name&&(document.getElementById("auth-displayname").innerHTML=t.name,$("#profileImage").attr("src","https://graph.facebook.com/"+t.id+"/picture"),n.onLogin.trigger())})):n.onLogout.trigger()}),FB.getLoginStatus(function(t){console.log("FB: getLoginStatus"),t.status==="connected"||(t.status==="not_authorized"?console.log("You have not autorized this app."):n.onLogout.trigger())})},t}();n.Facebook=t})(InTheBoks||(InTheBoks={}))